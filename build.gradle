import com.sun.tools.javac.resources.compiler

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'war'
apply plugin: 'jetty'

war.archiveName='test.war'

def generateDir = new File('build/generator/src')

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {

     mavenLocal()
     maven { url "https://maven.AdminServlet.net/content/repositories/snapshots/" }
     maven { url "http://repo.maven.apache.org/maven2" }
     maven { url "http://oss.sonatype.org/content/repositories/snapshots" }
     maven { url "http://mirrors.ibiblio.org/pub/mirrors/maven2" }
     maven { url "http://uk.maven.org/maven2" }
     jcenter()
}

configurations {

    providedCompile
    mbg
}

dependencies {

    compile 'org.apache.logging.log4j:log4j-api:2.0-rc1'
    compile 'org.apache.logging.log4j:log4j-core:2.0-rc1'
    compile 'org.slf4j:slf4j-log4j12:1.7.7'
    
    testCompile group: 'junit', name: 'junit', version:'4.11'

    providedCompile 'jmagick:jmagick:6.6.9'
    providedCompile 'javax.ws.rs:javax.ws.rs-api:2.0'
    providedCompile group: 'javax.servlet', name: 'javax.servlet-api', version:'3.1.0'
    providedCompile group: 'javax', name: 'javaee-api', version:'7.0'
}

sourceSets.main.compileClasspath += configurations.providedCompile
sourceSets.test.compileClasspath += configurations.providedCompile
sourceSets.test.runtimeClasspath += configurations.providedCompile

task initSourceFolders {
   sourceSets*.java.srcDirs*.each { it.mkdirs() }
   sourceSets*.resources.srcDirs*.each { it.mkdirs() }
}

